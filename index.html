<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Rogue RPG</title>
<style>
body{text-align:center;font-family:sans-serif;}
.day{background:#f2f2f2;color:black;}
.night{background:#111;color:white;}
#box{width:900px;margin:auto;border:2px solid #555;padding:10px;}
.panel{border:1px solid #444;margin:6px;padding:6px;}
button{margin:4px;font-size:15px;}
.hidden{display:none;}
</style>
</head>
<body class="day">

<div id="startUI">
<h2>ìŠ¤íƒ¯ ë¶„ë°° (12)</h2>
SPD <span id="spd">0</span>
<button onclick="stat('spd',1)">+</button>
<button onclick="stat('spd',-1)">-</button><br>
HP <span id="hp">0</span>
<button onclick="stat('hp',1)">+</button>
<button onclick="stat('hp',-1)">-</button><br>
ATK <span id="atk">0</span>
<button onclick="stat('atk',1)">+</button>
<button onclick="stat('atk',-1)">-</button><br>
ë‚¨ì€ í¬ì¸íŠ¸ <span id="pt">12</span><br>
<button onclick="startGame()">ì‹œì‘</button>
</div>

<div id="box" class="hidden">
<h3><span id="timeUI">ğŸŒ DAY</span> | ìƒì¡´ì¼ <span id="days">1</span></h3>

<div class="panel">
<b>PLAYER</b><br>
HP <span id="pHp"></span>
ATK <span id="pAtk"></span>
SPD <span id="pSpd"></span>
</div>

<div class="panel">
<b>MONSTER</b><br>
<span id="mInfo">ì—†ìŒ</span>
</div>

<div class="panel">
Gold <span id="gold">0</span><br>
Items: <span id="items">ì—†ìŒ</span>
</div>

<div id="log">ì´ë™í•˜ì</div>

<button onclick="move()">ì´ë™</button>

<div id="battleUI" class="hidden">
<button onclick="attack()">ê³µê²©</button>
<button onclick="escape()">ë„ë§</button>
</div>

<button style="margin-top:30px" onclick="location.reload()">ì²˜ìŒìœ¼ë¡œ</button>
</div>

<script>
let stats={spd:0,hp:0,atk:0}, pt=12;
let player, monster=null;
let isDay=true, dayCount=1, turn=0;
let gold=0, items=[];
let stunned=false;

function stat(k,v){
 if(pt-v<0||stats[k]+v<0)return;
 stats[k]+=v; pt-=v;
 spd.innerText=stats.spd; hp.innerText=stats.hp; atk.innerText=stats.atk; pt.innerText=pt;
}

function startGame(){
 if(stats.hp<=0||pt>0)return alert("ìŠ¤íƒ¯ í™•ì¸!");
 player={...stats,hp:stats.hp};
 startUI.classList.add("hidden");
 box.classList.remove("hidden");
 update();
}

function move(){
 let dice=Math.floor(Math.random()*12)+1;
 let appear=isDay?dice<=4:dice<=8;
 if(!appear){log("ì¡°ìš©í•˜ë‹¤");return;}
 spawnMonster();
}

function spawnMonster(){
 let r=Math.random();
 if(r<0.33) monster={name:"í¬ì´ì¦Œ í”Œë¼ì›Œ",hp:6,atk:0,spd:0,type:1};
 else if(r<0.66) monster={name:"ë°•ì¥",hp:3,atk:1,spd:3,type:2};
 else monster={name:"ì—¬ìš°",hp:3,atk:3,spd:3,type:3};
 battleUI.classList.remove("hidden");
 log(monster.name+" ë“±ì¥!");
 firstStrike();
 update();
}

function firstStrike(){
 if(monster.spd>player.spd) monsterAttack();
 else if(monster.spd===player.spd && monster.hp<player.hp) monsterAttack();
}

function attack(){
 if(stunned){stunned=false;log("ê°ì „ìœ¼ë¡œ ê³µê²© ë¶ˆê°€!"); monsterAttack(); return;}
 monster.hp-=player.atk;
 if(monster.hp<=0){win();return;}
 monsterAttack();
}

function monsterAttack(){
 if(monster.type===1){
  let r=Math.floor(Math.random()*3);
  ["atk","spd","hp"][r];
  monster[["atk","spd","hp"][r]]++;
 }
 if(monster.type===2){
  if(Math.floor(Math.random()*6)+1>=3) stunned=true;
 }
 player.hp-=monster.atk;
 if(player.hp<=0){alert("íŒ¨ë°°");location.reload();}
 update();
}

function win(){
 log(monster.name+" ì²˜ì¹˜!");
 monster=null;
 battleUI.classList.add("hidden");
 turn++;
 if(turn>=5){
  turn=0;
  if(isDay)isDay=false;
  else{isDay=true;dayCount++;}
 }
 update();
}

function escape(){
 let d=Math.floor(Math.random()*6)+1;
 if(d<=4) monsterAttack();
 else win();
}

function update(){
 document.body.className=isDay?"day":"night";
 timeUI.innerText=isDay?"ğŸŒ DAY":"ğŸŒ™ NIGHT";
 days.innerText=dayCount;
 pHp.innerText=player.hp; pAtk.innerText=player.atk; pSpd.innerText=player.spd;
 mInfo.innerText=monster?`${monster.name} HP:${monster.hp} ATK:${monster.atk} SPD:${monster.spd}`:"ì—†ìŒ";
 gold.innerText=gold;
 items.innerText=items.join(",");
}
function log(t){document.getElementById("log").innerText=t;}
</script>
</body>
</html>
