<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Pixel Rogue RPG</title>
<style>
body{
  margin:0;
  background:#111;
  color:white;
  text-align:center;
  font-family:sans-serif;
}
.day { background:#eee; color:black; }
.night { background:#111; color:white; }

#gameBox{
  width:900px;
  margin:auto;
  border:2px solid #555;
  min-height:500px;
}

.panel{
  width:45%;
  border:1px solid #444;
  padding:8px;
}

#statusBar{
  display:flex;
  justify-content:space-between;
  padding:10px;
}

button{
  font-size:16px;
  margin:4px;
}
</style>
</head>
<body class="night">

<!-- ì‹œì‘ í™”ë©´ -->
<div id="startUI">
<h2>ìŠ¤íƒ¯ ë¶„ë°° (12)</h2>

ìŠ¤í”¼ë“œ <span id="spd">0</span>
<button onclick="stat('spd',1)">+</button>
<button onclick="stat('spd',-1)">-</button><br>

ì²´ë ¥ <span id="hpStat">0</span>
<button onclick="stat('hp',1)">+</button>
<button onclick="stat('hp',-1)">-</button><br>

ê³µê²© <span id="atkStat">0</span>
<button onclick="stat('atk',1)">+</button>
<button onclick="stat('atk',-1)">-</button><br>

ë‚¨ì€ í¬ì¸íŠ¸: <span id="pt">12</span><br><br>
<button onclick="startGame()">ê²Œì„ ì‹œì‘</button>
</div>

<!-- ê²Œì„ í™”ë©´ -->
<div id="gameBox" style="display:none;">
<h3 id="topBar">ğŸŒ™ NIGHT</h3>

<div id="statusBar">
<div class="panel">
<b>PLAYER</b><br>
HP: <span id="pHp"></span><br>
ATK: <span id="pAtk"></span><br>
SPD: <span id="pSpd"></span>
</div>

<div class="panel">
<b>MONSTER</b><br>
<span id="mInfo">ì—†ìŒ</span>
</div>
</div>

<div class="panel">
<b>INVENTORY</b><br>
Gold: <span id="goldUI">0</span><br>
<span id="invUI"></span>
</div>

<div id="battleLog">ì´ë™í•´ë³´ì</div>

<button onclick="move()">ì´ë™</button>

<div id="battleUI" style="display:none;">
<button onclick="playerAttack()">âš”ï¸ ê³µê²©</button>
<button onclick="escape()">ğŸƒ ë„ë§</button>
</div>

<br>
<button onclick="resetGame()">ì²˜ìŒìœ¼ë¡œ</button>
</div>

<!-- íŒ¨ë°° -->
<div id="gameOverUI" style="display:none;">
<h1>ğŸ’€ íŒ¨ë°°</h1>
<button onclick="resetGame()">ë‹¤ì‹œ ì‹œì‘</button>
</div>

<script>
let stats={spd:0,hp:0,atk:0}, statPt=12;
let player, monster=null;
let inBattle=false;
let day=false, turn=0;
let inventory=[], gold=0;

function stat(k,v){
 if(statPt-v<0||stats[k]+v<0) return;
 stats[k]+=v; statPt-=v;
 spd.innerText=stats.spd;
 hpStat.innerText=stats.hp;
 atkStat.innerText=stats.atk;
 pt.innerText=statPt;
}

function startGame(){
 if(statPt>0) return alert("í¬ì¸íŠ¸ë¥¼ ë‹¤ ì¨!");
 player={hp:stats.hp,atk:stats.atk,spd:stats.spd};
 startUI.style.display="none";
 gameBox.style.display="block";
 updateUI();
}

function move(){
 if(inBattle) return;
 Math.random()<0.6 ? spawnMonster() : spawnChest();
}

function spawnMonster(){
 monster={
  hp: day?8:6,
  atk: day?3:2,
  spd:1
 };
 inBattle=true;
 battleUI.style.display="block";
 log("ëª¬ìŠ¤í„° ë“±ì¥!");
 updateUI();
}

function spawnChest(){
 let dice=Math.floor(Math.random()*6)+1;
 log("ìƒì ë°œê²¬! ğŸ² "+dice);

 if(dice<=2){
  inventory.push("ë‚˜ë­‡ê°€ì§€(+1)");
  log("ë‚˜ë­‡ê°€ì§€ íšë“!");
 }
 else if(dice<=4){
  gold++;
  log("ê³¨ë“œ +1");
 }
 else{
  monster={hp:1,atk:1,spd:999};
  inBattle=true;
  battleUI.style.display="block";
  log("ë¯¸ë¯¹ì´ë‹¤! ì„ ê³µ!");
  monsterAttack();
 }
 updateUI();
}

function playerAttack(){
 monster.hp-=player.atk;
 if(monster.hp<=0) return win();
 monsterAttack();
}

function monsterAttack(){
 player.hp-=monster.atk;
 if(player.hp<=0) return gameOver();
 updateUI();
}

function escape(){
 let dice=Math.floor(Math.random()*6)+1;
 log("ë„ë§ ì‹œë„ ğŸ² "+dice);
 if(dice<=4){
  log("ë„ë§ ì‹¤íŒ¨!");
  monsterAttack();
 } else {
  win(true);
 }
}

function win(escape=false){
 monster=null;
 inBattle=false;
 battleUI.style.display="none";
 turn++;
 if(turn>=5){
  turn=0;
  day=!day;
 }
 log(escape?"ë„ë§ ì„±ê³µ!":"ìŠ¹ë¦¬!");
 updateUI();
}

function updateUI(){
 document.body.className=day?"day":"night";
 topBar.innerText=day?"ğŸŒ DAY":"ğŸŒ™ NIGHT";
 pHp.innerText=player.hp;
 pAtk.innerText=player.atk;
 pSpd.innerText=player.spd;
 mInfo.innerText=monster?`HP ${monster.hp} ATK ${monster.atk}`:"ì—†ìŒ";
 goldUI.innerText=gold;
 invUI.innerText=inventory.join(", ");
}

function log(t){ battleLog.innerText=t; }
function gameOver(){
 gameBox.style.display="none";
 gameOverUI.style.display="block";
}
function resetGame(){ location.reload(); }
</script>
</body>
</html>
