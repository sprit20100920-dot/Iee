<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Pixel Rogue RPG</title>
<style>
  body {
    margin: 0;
    background: #111;
    color: white;
    font-family: sans-serif;
    text-align: center;
  }
  canvas {
    display: block;
    margin: auto;
    background: black;
    border: 2px solid #555;
  }
  button {
    font-size: 18px;
    margin: 4px;
  }
</style>
</head>
<body>

<h2 id="title">ìŠ¤íƒ¯ ë¶„ë°° (ì´ 12)</h2>

<div id="statUI">
  ìŠ¤í”¼ë“œ: <span id="speed">0</span>
  <button onclick="changeStat('speed',1)">+</button>
  <button onclick="changeStat('speed',-1)">-</button><br>

  ì²´ë ¥: <span id="hp">0</span>
  <button onclick="changeStat('hp',1)">+</button>
  <button onclick="changeStat('hp',-1)">-</button><br>

  ê³µê²©: <span id="atk">0</span>
  <button onclick="changeStat('atk',1)">+</button>
  <button onclick="changeStat('atk',-1)">-</button><br>

  <p>ë‚¨ì€ í¬ì¸íŠ¸: <span id="points">12</span></p>
  <button onclick="startGame()">ê²Œì„ ì‹œì‘</button>
</div>

<canvas id="game" width="900" height="600" style="display:none;"></canvas>

<script>
/* =====================
   ê¸°ë³¸ ë°ì´í„°
===================== */
let totalPoints = 12;

let player = {
  speed: 0,
  maxHp: 0,
  hp: 0,
  atk: 0
};

let isDay = true; // ë‚® / ë°¤

const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

/* =====================
   ìŠ¤íƒ¯ ë¶„ë°°
===================== */
function changeStat(stat, value) {
  if (value > 0 && totalPoints === 0) return;
  if (value < 0 && player[stat] === 0) return;

  player[stat] += value;
  totalPoints -= value;

  document.getElementById(stat === 'speed' ? 'speed' : stat).innerText = player[stat];
  document.getElementById('points').innerText = totalPoints;
}

function startGame() {
  if (totalPoints !== 0) {
    alert("í¬ì¸íŠ¸ë¥¼ ëª¨ë‘ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤!");
    return;
  }

  player.maxHp = player.hp * 10;
  player.hp = player.maxHp;

  document.getElementById("statUI").style.display = "none";
  document.getElementById("title").style.display = "none";
  canvas.style.display = "block";

  draw();
}

/* =====================
   ê²Œì„ í™”ë©´ ê·¸ë¦¬ê¸°
===================== */
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // ë‚® / ë°¤ í‘œì‹œ
  ctx.fillStyle = "white";
  ctx.font = "20px Arial";
  ctx.fillText(isDay ? "ğŸŒ DAY" : "ğŸŒ™ NIGHT", 20, 30);

  // ì  (ì„ì‹œ)
  ctx.fillStyle = isDay ? "darkred" : "red";
  ctx.fillRect(400, 120, 100, 100);
  ctx.fillStyle = "white";
  ctx.fillText("ì ", 440, 180);

  // í”Œë ˆì´ì–´
  ctx.fillStyle = "blue";
  ctx.fillRect(400, 350, 100, 100);
  ctx.fillStyle = "white";
  ctx.fillText("í”Œë ˆì´ì–´", 420, 415);

  // ìŠ¤íƒ¯ í‘œì‹œ
  ctx.fillText(
    `HP: ${player.hp}/${player.maxHp}  ATK: ${player.atk}  SPD: ${player.speed}`,
    20, 570
  );
}

/* =====================
   ë‚® / ë°¤ ì „í™˜ (í…ŒìŠ¤íŠ¸ìš©)
===================== */
setInterval(() => {
  if (canvas.style.display === "none") return;
  isDay = !isDay;
  draw();
}, 7000);
</script>

</body>
</html>
